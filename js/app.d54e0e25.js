(function(e){function t(t){for(var r,a,u=t[0],l=t[1],i=t[2],p=0,d=[];p<u.length;p++)a=u[p],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);s&&s(t);while(d.length)d.shift()();return o.push.apply(o,i||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,u=1;u<n.length;u++){var l=n[u];0!==c[l]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},c={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/live-chat-app/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var s=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"09f8":function(e,t,n){},"150b":function(e,t,n){},"345f":function(e,t,n){"use strict";n("dcc9")},"35fd":function(e,t,n){"use strict";n("abb4")},"51c6":function(e,t,n){"use strict";n("09f8")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={id:"app"};function o(e,t){var n=Object(r["resolveComponent"])("router-view");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",c,[Object(r["createVNode"])(n)])}n("a8ae");var a=n("6b0d"),u=n.n(a);const l={},i=u()(l,[["render",o]]);var s=i,p=n("6605"),d={class:"welcome container"},b={key:0},m={key:1};function f(e,t,n,c,o,a){var u=Object(r["resolveComponent"])("Login"),l=Object(r["resolveComponent"])("Signup");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",d,[c.showLoginForm?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",b,[Object(r["createVNode"])(u,{onEnterChatroom:c.enterChatroom},null,8,["onEnterChatroom"]),Object(r["createElementVNode"])("p",null,[t[2]||(t[2]=Object(r["createTextVNode"])("not a member? ")),Object(r["createElementVNode"])("span",{onClick:t[0]||(t[0]=function(e){return c.showLoginForm=!c.showLoginForm})},"create account?")])])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",m,[Object(r["createVNode"])(l,{onEnterChatroom:c.enterChatroom},null,8,["onEnterChatroom"]),Object(r["createElementVNode"])("p",null,[t[3]||(t[3]=Object(r["createTextVNode"])("Already member? ")),Object(r["createElementVNode"])("span",{onClick:t[1]||(t[1]=function(e){return c.showLoginForm=!c.showLoginForm})},"Login Account?")])]))])}n("14d9");var O={key:0,class:"error"};function j(e,t,n,c,o,a){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[t[4]||(t[4]=Object(r["createElementVNode"])("h2",null,"Login",-1)),Object(r["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(r["withModifiers"])((function(){return c.login&&c.login.apply(c,arguments)}),["prevent"]))},[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"email",placeholder:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.email=e})},null,512),[[r["vModelText"],c.email]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"password",placeholder:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.password=e})},null,512),[[r["vModelText"],c.password]]),c.error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",O,Object(r["toDisplayString"])(c.error),1)):Object(r["createCommentVNode"])("",!0),t[3]||(t[3]=Object(r["createElementVNode"])("button",null,"Login",-1))],32)])}var v=n("c14f"),h=n("1da1"),g=(n("d9e2"),n("260b")),w=(n("e71f"),n("ea7b"),{apiKey:"AIzaSyAspBK9CnsN3moseNq1SsN7O0VMWYkr-j0",authDomain:"live-chat-8ac38.firebaseapp.com",projectId:"live-chat-8ac38",storageBucket:"live-chat-8ac38.firebasestorage.app",messagingSenderId:"576077009405",appId:"1:576077009405:web:c71728ad1993c2c6a9c994",measurementId:"G-NCMRF68H7D"});g["a"].initializeApp(w);var y=g["a"].auth(),E=g["a"].firestore(),N=g["a"].firestore.FieldValue.serverTimestamp,k=n("7a23"),V=k.ref,B=V(null),C=function(){var e=Object(h["a"])(Object(v["a"])().m((function e(t,n){var r,c;return Object(v["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,y.signInWithEmailAndPassword(t,n);case 1:if(r=e.v,r){e.n=2;break}throw new Error("can't login account");case 2:return e.a(2,r);case 3:e.p=3,c=e.v,B.value=c.message,console.log(B.value);case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){return{error:B,signIn:C}},x=S,D={setup:function(e,t){var n=Object(r["ref"])(""),c=Object(r["ref"])(""),o=x(),a=o.error,u=o.signIn,l=function(){var e=Object(h["a"])(Object(v["a"])().m((function e(){var r;return Object(v["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,u(n.value,c.value);case 1:r=e.v,r&&t.emit("enterChatroom");case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();return{email:n,password:c,login:l,error:a}}};const M=u()(D,[["render",j]]);var U=M,L={key:0,class:"error"};function A(e,t,n,c,o,a){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[t[5]||(t[5]=Object(r["createElementVNode"])("h2",null,"Sign Up",-1)),Object(r["createElementVNode"])("form",{onSubmit:t[3]||(t[3]=Object(r["withModifiers"])((function(){return c.signUp&&c.signUp.apply(c,arguments)}),["prevent"]))},[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",placeholder:"display name","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.displayName=e})},null,512),[[r["vModelText"],c.displayName]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"email",placeholder:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.email=e})},null,512),[[r["vModelText"],c.email]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"password",placeholder:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.password=e})},null,512),[[r["vModelText"],c.password]]),c.error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",L,Object(r["toDisplayString"])(c.error),1)):Object(r["createCommentVNode"])("",!0),t[4]||(t[4]=Object(r["createElementVNode"])("button",null,"Sign Up",-1))],32)])}var T=Object(r["ref"])(null),_=function(){var e=Object(h["a"])(Object(v["a"])().m((function e(t,n,r){var c,o;return Object(v["a"])().w((function(e){while(1)switch(e.n){case 0:return e.p=0,e.n=1,y.createUserWithEmailAndPassword(t,n);case 1:if(c=e.v,c){e.n=2;break}throw new Error("could not create new user");case 2:return c.user.updateProfile({displayName:r}),e.a(2,c);case 3:e.p=3,o=e.v,T.value=o.message;case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,n,r){return e.apply(this,arguments)}}(),F=function(){return{error:T,createAccount:_}},P=F,I={setup:function(e,t){var n=Object(r["ref"])(""),c=Object(r["ref"])(""),o=Object(r["ref"])(""),a=P(),u=a.error,l=a.createAccount,i=function(){var e=Object(h["a"])(Object(v["a"])().m((function e(){var r;return Object(v["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,l(c.value,o.value,n.value);case 1:r=e.v,r&&t.emit("enterChatroom");case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();return{displayName:n,email:c,password:o,signUp:i,error:u}}};const W=u()(I,[["render",A]]);var K=W,H={components:{Login:U,Signup:K},setup:function(){var e=Object(r["ref"])(!0),t=Object(p["c"])(),n=function(){t.push({name:"Chatroom"})};return{showLoginForm:e,enterChatroom:n}}};n("35fd");const z=u()(H,[["render",f]]);var J=z,q={class:"container"};function G(e,t,n,c,o,a){var u=Object(r["resolveComponent"])("Navbar"),l=Object(r["resolveComponent"])("ChatWindow"),i=Object(r["resolveComponent"])("NewChatForm");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",q,[Object(r["createVNode"])(u),Object(r["createVNode"])(l),Object(r["createVNode"])(i)])}var R={key:0},Y={class:"email"};function Q(e,t,n,c,o,a){return c.user?(Object(r["openBlock"])(),Object(r["createElementBlock"])("nav",R,[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("p",null,"Hi "+Object(r["toDisplayString"])(c.user.displayName),1),Object(r["createElementVNode"])("p",Y,"logged in as "+Object(r["toDisplayString"])(c.user.email),1)]),Object(r["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return c.logout&&c.logout.apply(c,arguments)})},"Logout")])):Object(r["createCommentVNode"])("",!0)}var X=Object(r["ref"])(y.currentUser);y.onAuthStateChanged((function(e){X.value=e}));var Z=function(){return{user:X}},$=Z,ee={setup:function(){var e=Object(r["ref"])(null),t=$(),n=t.user,c=function(){var t=Object(h["a"])(Object(v["a"])().m((function t(){var n;return Object(v["a"])().w((function(t){while(1)switch(t.n){case 0:return t.p=0,t.n=1,y.signOut();case 1:console.log("user logged out"),t.n=3;break;case 2:t.p=2,n=t.v,e.value=n.message,console.log(n.value);case 3:return t.a(2)}}),t,null,[[0,2]])})));return function(){return t.apply(this,arguments)}}();return{logout:c,user:n}}};n("573b");const te=u()(ee,[["render",Q]]);var ne=te,re=(n("b0c0"),{class:"chat-window"}),ce={class:"messages",ref:"msgBox"},oe={class:"created-at"},ae={class:"name"},ue={class:"message"};function le(e,t,n,c,o,a){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",re,[Object(r["createElementVNode"])("div",ce,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(c.formattedMessages,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"single",key:e.id},[Object(r["createElementVNode"])("span",oe,Object(r["toDisplayString"])(e.created_at),1),Object(r["createElementVNode"])("span",ae,Object(r["toDisplayString"])(e.name),1),Object(r["createElementVNode"])("span",ue,Object(r["toDisplayString"])(e.message),1)])})),128))],512)])}var ie=n("5530"),se=(n("d81d"),n("e9f5"),n("7d54"),n("ab43"),n("d3b7"),n("159b"),n("ef1b")),pe={setup:function(){var e=Object(r["ref"])([]),t=Object(r["ref"])(null);Object(r["onUpdated"])((function(){t.value.scrollTop=t.value.scrollHeight}));var n=Object(r["computed"])((function(){return e.value.map((function(e){var t=Object(se["a"])(e.created_at.toDate());return Object(ie["a"])(Object(ie["a"])({},e),{},{created_at:t})}))}));return E.collection("messages").orderBy("created_at").onSnapshot((function(t){var n=[];t.docs.forEach((function(e){var t=Object(ie["a"])(Object(ie["a"])({},e.data()),{},{id:e.id});e.data().created_at&&n.push(t)})),e.value=n})),{messages:e,formattedMessages:n,msgBox:t}}};n("345f");const de=u()(pe,[["render",le]]);var be=de;function me(e,t,n,c,o,a){return Object(r["openBlock"])(),Object(r["createElementBlock"])("form",null,[Object(r["withDirectives"])(Object(r["createElementVNode"])("textarea",{placeholder:"text message and hit enter to send","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.message=e}),onKeypress:t[1]||(t[1]=Object(r["withKeys"])((function(){return c.handleSubmit&&c.handleSubmit.apply(c,arguments)}),["enter"]))},null,544),[[r["vModelText"],c.message]])])}var fe=function(e){var t=Object(r["ref"])(null),n=function(){var n=Object(h["a"])(Object(v["a"])().m((function n(r){var c;return Object(v["a"])().w((function(n){while(1)switch(n.n){case 0:return n.p=0,n.n=1,E.collection(e).add(r);case 1:n.n=3;break;case 2:n.p=2,c=n.v,console.log(c.message),t.value="could not send the message";case 3:return n.a(2)}}),n,null,[[0,2]])})));return function(e){return n.apply(this,arguments)}}();return{error:t,addDoc:n}},Oe=fe,je={setup:function(){var e=Object(r["ref"])(""),t=$(),n=t.user,c=Oe("messages"),o=c.error,a=c.addDoc,u=function(){var t=Object(h["a"])(Object(v["a"])().m((function t(){var r;return Object(v["a"])().w((function(t){while(1)switch(t.n){case 0:return r={message:e.value,name:n.value.displayName,created_at:N()},t.n=1,a(r);case 1:e.value="";case 2:return t.a(2)}}),t)})));return function(){return t.apply(this,arguments)}}();return{message:e,handleSubmit:u,error:o}}};n("51c6");const ve=u()(je,[["render",me]]);var he=ve,ge={components:{ChatWindow:be,NewChatForm:he,Navbar:ne},setup:function(){var e=$(),t=e.user,n=Object(p["c"])();Object(r["watch"])(t,(function(){t.value||n.push("/")}))}};const we=u()(ge,[["render",G]]);var ye,Ee=we,Ne=[{path:"/",name:"Welcome",component:J,beforeEnter:function(e,t,n){var r=y.currentUser;r?n({name:"Chatroom"}):n()}},{path:"/chatroom",name:"Chatroom",component:Ee,beforeEnter:function(e,t,n){var r=y.currentUser;r?n():n({name:"Welcome"})}}],ke=Object(p["a"])({history:Object(p["b"])("/live-chat-app/"),routes:Ne}),Ve=ke;n("150b");y.onAuthStateChanged((function(){ye||(ye=Object(r["createApp"])(s).use(Ve).mount("#app"))}))},"573b":function(e,t,n){"use strict";n("9367")},9367:function(e,t,n){},a8ae:function(e,t,n){"use strict";n("e59d")},abb4:function(e,t,n){},dcc9:function(e,t,n){},e59d:function(e,t,n){}});
//# sourceMappingURL=app.d54e0e25.js.map